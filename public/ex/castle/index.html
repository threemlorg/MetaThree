<html>
<head>
 
</head>
<body>
    <div id="container">
        <three>
            <stat></stat>
            <renderer clearColor="#000000"></renderer>
            <!--<skybox url="/ex/grass/images/lilienstein.jpg"></skybox>-->
            <orbitcontrols target="0 0 -4" reversed="true"></orbitcontrols>
            <home></home>
            <loader maxtime="30"></loader>
            <group name="holder" parent="camera" position="0.1 -0.2 -0.3">
            </group>
            <group name="camlight" parent="camera" position="0.3 0.3 -0.7">
                <pointlight intensity="2" decay="2" distance="0.7" >
                </pointlight>
            </group>

            <group name="texts" parent="camera" position="0.3 0.3 -1">
                <TextGeometry name="t0" position="0 0 0" text="What has happened?" scale="0.3" >
                    <meshphongmaterial id="mat" color="1 0 1"></meshphongmaterial>
                 </TextGeometry>
               <TextGeometry name="t1" position="0 0 0" text="Where am I?" scale="0.3" visible="false">
                    <meshphongmaterial id="mat2" color="1 0 1"></meshphongmaterial>
                 </TextGeometry>
             </group>
            <group>
                <actions>
                    <action type="transform" visible="false" target="t0" speed="0.02"></action>
                    <action type="pause" speed="0.02"></action>
                    <action type="transform" visible="true" target="t1" speed="0.02"></action>
                    <action type="pause" speed="0.02"></action>
                    <action type="transform" visible="false" target="t1" speed="0.02"></action>
                    <action type="pause" speed="0.02"></action>
                    <action type="transform" visible="true" target="t0" speed="0.02"></action>
                    <action type="pause" speed="0.02"></action>
                    <action type="transform" visible="false" target="t0" speed="0.02"></action>
                 </actions>

            </group>
            <group name="total" position="0 8 -3">
                <group name="level2" position="0 0 0" rotation="0 120 0" scale="15">
                    <gltfLoader position="0 0 0" url="./models/squarestonehole.glb" receiveshadow="true">
                        <media volume="0.6" url='./media/eerie-ambience-6836.mp3' loop="true" volumetric="true"></media>           </gltfLoader>
                    <group name="bridgeholder" position="0.6 -0.5 2.24" rotation="0 90 0">
                        <gltfLoader name="bridge"  url="./models/bridge.glb" receiveshadow="true">
                        </gltfLoader>
                        <planegeometry position="0 -0.18 0" scale="2.5 0.3 1"  rotation="-90 0 0" visible="false">
                            <walk></walk>
                        </planegeometry>
                        <group url="./html/text1.html" position="0 -0.1 0" scale="0.1" margin="10" target="texts" replace="true">
                            <!-- <spheregeometry scale="0.05"></spheregeometry> -->
                        </group>
                    </group>
                     <planegeometry position="0 -0.8 0" scale="1.5" rotation="-90 0 0" visible="false">
                        <walk></walk>
                    </planegeometry>
                    <group name="stair1" position="0.68 -0.8 0.86" scale="0.07">
                        <gltfLoader name="stone1" url="./models/squarestone.glb" rotation="0 0 0">
                        </gltfLoader>
                        <gltfLoader name="stone2" url="./models/squarestone.glb" position="-1.8 0 0" rotation="0 90 0">
                        </gltfLoader>
                        <planegeometry position="-0.9 1.05 0" scale="4 2 2" rotation="-90 0 0" visible="false">
                            <walk></walk>
                        </planegeometry>
                    </group>

                    <gltfLoader name="spider" position="-0.08 0.18 0.74" url="./models/spider.glb" scale="1.3" rotation="-102 147 0" castshadow="true">
                        <animate speed="0.4"></animate>
                        <actions repeat="true">
                            <action type="pause"></action>
                            <action type="transform" position="0.15 -0.35 0.74" speed="0.004"></action>
                            <action type="pause"></action>
                            <action type="transform" position="-0.08 0.18 0.74" speed="0.004"></action>
                       </actions>
                    </gltfLoader>
                <group name="lamp" position="-0.75 -0.6 0" scale="0.04">
                    <gltfLoader name="lamp1" url="./models/lamp.glb" rotation="0 0 0" castshadow="true">
                    </gltfLoader>
                    <fire position="0 2.13 0" scale="2 4 2"></fire>
                    <group name="pointlight" position="0 3 0">
                        <pointlight intensity="1" decay="2" distance="20" castshadow="true">
                            <actions repeat="true">
                                <action type="transform" intensity="0.5" speed="0.01"></action>
                                <action type="transform" intensity="2.10" speed="0.002"></action>
                                <action type="transform" intensity="0.8" speed="0.041"></action>
                                <action type="transform" intensity="0.8" speed="0.00041"></action>
                                <action type="transform" intensity="1.12" speed="0.01"></action>
                                <action type="transform" intensity="2.5" speed="0.002"></action>
                                <action type="transform" intensity="0.12" speed="0.011"></action>
                                <action type="transform" intensity="0.12" speed="0.0011"></action>
                            </actions>
    
                        </pointlight>
                        <actions repeat="true">
                            <action type="transform" position="0.1 3 0.1" speed="0.01"></action>
                            <action type="transform" position="0 3.1 0.1" speed="0.003"></action>
                            <action type="transform" position="0.1 3.1 0" speed="0.01"></action>
                            <action type="transform" position="0 3.1 0.1" speed="0.003"></action>
                            <action type="transform" position="0.1 3.1 0" speed="0.001"></action>
                        </actions>
                                        </group>
                     <rotate axis="0 0.0001 0"></rotate>

          
               </group>    
               <gltfLoader name="branch" position="0 -0.77 0" url="./models/branch.glb" rotation="0 0 100" scale="0.3">
                <link url="./html/torch.html" target="holder"/>
                </gltfLoader>
                <gltfLoader name="skeleton" position="0.28 -0.84 -0.53" url="./models/skeleton.glb" rotation="12 0 23" scale="0.5" castshadow="true">
                    <animate speed="1"></animate>
                </gltfLoader>
    
                <gltfLoader position="0 0 0" url="./models/squarestonehole.glb" rotation="0 30 0" scale="40">
                </gltfLoader>
                <gltfLoader name="maze" position="-9 -31 15" url="./models/maze.glb" rotation="0 30 0" scale="10">
                    <walk></walk>
                </gltfLoader>
          </group>
  
            <directionallight intensity="0.3" target="total" position="3 3 0">
            </directionallight>
            <ambientlight intensity="0.3"></ambientlight>
        </three>
    </div>
    <script>
      var threeml;
    </script>
    <script type="module">
      import { ThreeML } from '/threeml/threeml.js'
      threeml = new ThreeML();
      threeml.parseThree();
    </script>
</body>
</html>